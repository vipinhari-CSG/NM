import { POSITIVE_VALIDATION_RESULT } from '../rule';
const createIdentifierToCheck = (passedConfig) => {
    if (!passedConfig) {
        return null;
    }
    const { authority, clientId, scope } = passedConfig;
    return `${authority}${clientId}${scope}`;
};
const arrayHasDuplicates = (array) => new Set(array).size !== array.length;
export const ensureNoDuplicatedConfigsRule = (passedConfigs) => {
    const allIdentifiers = passedConfigs.map((x) => createIdentifierToCheck(x));
    const someAreNull = allIdentifiers.some((x) => x === null);
    if (someAreNull) {
        return {
            result: false,
            messages: [`Please make sure you add an object with a 'config' property: ....({ config }) instead of ...(config)`],
            level: 'error',
        };
    }
    const hasDuplicates = arrayHasDuplicates(allIdentifiers);
    if (hasDuplicates) {
        return {
            result: false,
            messages: ['You added multiple configs with the same authority, clientId and scope'],
            level: 'warning',
        };
    }
    return POSITIVE_VALIDATION_RESULT;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW5zdXJlLW5vLWR1cGxpY2F0ZWQtY29uZmlncy5ydWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvYW5ndWxhci1hdXRoLW9pZGMtY2xpZW50L3NyYy9saWIvY29uZmlnL3ZhbGlkYXRpb24vcnVsZXMvZW5zdXJlLW5vLWR1cGxpY2F0ZWQtY29uZmlncy5ydWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSwwQkFBMEIsRUFBd0IsTUFBTSxTQUFTLENBQUM7QUFFM0UsTUFBTSx1QkFBdUIsR0FBRyxDQUFDLFlBQWlDLEVBQVUsRUFBRTtJQUM1RSxJQUFJLENBQUMsWUFBWSxFQUFFO1FBQ2pCLE9BQU8sSUFBSSxDQUFDO0tBQ2I7SUFFRCxNQUFNLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsR0FBRyxZQUFZLENBQUM7SUFFcEQsT0FBTyxHQUFHLFNBQVMsR0FBRyxRQUFRLEdBQUcsS0FBSyxFQUFFLENBQUM7QUFDM0MsQ0FBQyxDQUFDO0FBRUYsTUFBTSxrQkFBa0IsR0FBRyxDQUFDLEtBQWUsRUFBVyxFQUFFLENBQUMsSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxLQUFLLEtBQUssQ0FBQyxNQUFNLENBQUM7QUFFOUYsTUFBTSxDQUFDLE1BQU0sNkJBQTZCLEdBQUcsQ0FBQyxhQUFvQyxFQUF3QixFQUFFO0lBQzFHLE1BQU0sY0FBYyxHQUFHLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLHVCQUF1QixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFNUUsTUFBTSxXQUFXLEdBQUcsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDO0lBRTNELElBQUksV0FBVyxFQUFFO1FBQ2YsT0FBTztZQUNMLE1BQU0sRUFBRSxLQUFLO1lBQ2IsUUFBUSxFQUFFLENBQUMsc0dBQXNHLENBQUM7WUFDbEgsS0FBSyxFQUFFLE9BQU87U0FDZixDQUFDO0tBQ0g7SUFFRCxNQUFNLGFBQWEsR0FBRyxrQkFBa0IsQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUV6RCxJQUFJLGFBQWEsRUFBRTtRQUNqQixPQUFPO1lBQ0wsTUFBTSxFQUFFLEtBQUs7WUFDYixRQUFRLEVBQUUsQ0FBQyx3RUFBd0UsQ0FBQztZQUNwRixLQUFLLEVBQUUsU0FBUztTQUNqQixDQUFDO0tBQ0g7SUFFRCxPQUFPLDBCQUEwQixDQUFDO0FBQ3BDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9wZW5JZENvbmZpZ3VyYXRpb24gfSBmcm9tICcuLi8uLi9vcGVuaWQtY29uZmlndXJhdGlvbic7XG5pbXBvcnQgeyBQT1NJVElWRV9WQUxJREFUSU9OX1JFU1VMVCwgUnVsZVZhbGlkYXRpb25SZXN1bHQgfSBmcm9tICcuLi9ydWxlJztcblxuY29uc3QgY3JlYXRlSWRlbnRpZmllclRvQ2hlY2sgPSAocGFzc2VkQ29uZmlnOiBPcGVuSWRDb25maWd1cmF0aW9uKTogc3RyaW5nID0+IHtcbiAgaWYgKCFwYXNzZWRDb25maWcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IHsgYXV0aG9yaXR5LCBjbGllbnRJZCwgc2NvcGUgfSA9IHBhc3NlZENvbmZpZztcblxuICByZXR1cm4gYCR7YXV0aG9yaXR5fSR7Y2xpZW50SWR9JHtzY29wZX1gO1xufTtcblxuY29uc3QgYXJyYXlIYXNEdXBsaWNhdGVzID0gKGFycmF5OiBzdHJpbmdbXSk6IGJvb2xlYW4gPT4gbmV3IFNldChhcnJheSkuc2l6ZSAhPT0gYXJyYXkubGVuZ3RoO1xuXG5leHBvcnQgY29uc3QgZW5zdXJlTm9EdXBsaWNhdGVkQ29uZmlnc1J1bGUgPSAocGFzc2VkQ29uZmlnczogT3BlbklkQ29uZmlndXJhdGlvbltdKTogUnVsZVZhbGlkYXRpb25SZXN1bHQgPT4ge1xuICBjb25zdCBhbGxJZGVudGlmaWVycyA9IHBhc3NlZENvbmZpZ3MubWFwKCh4KSA9PiBjcmVhdGVJZGVudGlmaWVyVG9DaGVjayh4KSk7XG5cbiAgY29uc3Qgc29tZUFyZU51bGwgPSBhbGxJZGVudGlmaWVycy5zb21lKCh4KSA9PiB4ID09PSBudWxsKTtcblxuICBpZiAoc29tZUFyZU51bGwpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgIG1lc3NhZ2VzOiBbYFBsZWFzZSBtYWtlIHN1cmUgeW91IGFkZCBhbiBvYmplY3Qgd2l0aCBhICdjb25maWcnIHByb3BlcnR5OiAuLi4uKHsgY29uZmlnIH0pIGluc3RlYWQgb2YgLi4uKGNvbmZpZylgXSxcbiAgICAgIGxldmVsOiAnZXJyb3InLFxuICAgIH07XG4gIH1cblxuICBjb25zdCBoYXNEdXBsaWNhdGVzID0gYXJyYXlIYXNEdXBsaWNhdGVzKGFsbElkZW50aWZpZXJzKTtcblxuICBpZiAoaGFzRHVwbGljYXRlcykge1xuICAgIHJldHVybiB7XG4gICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgbWVzc2FnZXM6IFsnWW91IGFkZGVkIG11bHRpcGxlIGNvbmZpZ3Mgd2l0aCB0aGUgc2FtZSBhdXRob3JpdHksIGNsaWVudElkIGFuZCBzY29wZSddLFxuICAgICAgbGV2ZWw6ICd3YXJuaW5nJyxcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIFBPU0lUSVZFX1ZBTElEQVRJT05fUkVTVUxUO1xufTtcbiJdfQ==